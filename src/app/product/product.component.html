<app-base-layout>
  <section class="my-4 sm:my-8 flex flex-col md:flex-row gap-6">
    <article class="flex flex-col gap-4 size-full md:size-1/2">
      <div
        class="p-6 bg-primary-50 grid place-content-center border border-primary-100 rounded-md shadow overflow-hidden"
      >
        @if (activeImgSrc()) {
        <img
          #productImg
          sizes="(min-width: 768px) 80vw, 100vw"
          [ngSrc]="activeImgSrc()"
          [alt]="product?.name"
          width="296"
          height="296"
          priority
        />
        }
      </div>
      <div class="flex flex-wrap gap-4">
        @for (image of product?.images; track $index) {
        <button
          (click)="changeActiveImg(image)"
          class="product-img"
          [class.product-img-active]="image"
        >
          <div class="relative size-full">
            <img [ngSrc]="image" fill priority />
          </div>
        </button>
        }
      </div>
    </article>
    <article class="flex flex-col md:size-1/2">
      <h1 class="font-bold text-gray-950 text-3xl">{{ product?.name }}</h1>
      <div class="mt-2 flex gap-2">
        <div class="flex items-center gap-1">
          <svg
            class="size-4 text-yellow-300"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 576 512"
          >
            <path
              d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"
            />
          </svg>
          <svg
            class="size-4 text-yellow-300"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 576 512"
          >
            <path
              d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"
            />
          </svg>
          <svg
            class="size-4 text-yellow-300"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 576 512"
          >
            <path
              d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"
            />
          </svg>
          <svg
            class="size-4 text-yellow-300"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 576 512"
          >
            <path
              d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"
            />
          </svg>
          <svg
            class="size-4 text-yellow-300"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 576 512"
          >
            <path
              d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"
            />
          </svg>
        </div>
        <p class="border-l border-gray-500 text-gray-500 ps-2 text-sm">
          {{ product?.reviews }} reviews
        </p>
      </div>
      <div
        class="mt-6 flex gap-2 text-3xl md:text-4xl font-extrabold items-baseline"
      >
        <p class="text-gray-950">{{ product?.price | currency }}</p>
        <del class="text-gray-500 text-base md:text-lg">{{
          product?.previousPrice | currency
        }}</del>
      </div>
      <div class="mt-3 space-y-8">
        <div [innerHTML]="product?.description" class="format"></div>
        <div class="flex gap-3">
          <button
            (click)="addToCart()"
            class="flex w-full items-center justify-center rounded-md bg-primary-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-primary-800 focus:outline-none focus:ring-4 focus:ring-primary-300"
          >
            Add to cart
          </button>
          <button
            class="flex w-full items-center justify-center rounded-md bg-gray-200 px-5 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-100"
          >
            Add to Favorites
          </button>
        </div>
      </div>
    </article>
  </section>
</app-base-layout>
